import Vector2 from 'vector2';

export default class Figure
{
	constructor(...points){
		this.points = new Array(points.length);
		this.setOffsets(points);
	}
	
	setOffsets(points){
		this.offsets = [];
		let PI_2 = Math.PI / 2;
		
		for (var i = 0; i < points.length; i++)
		{
			let pos = Vector2.check(points[i]);
			
			this.offsets.push({
				position: pos,
				rotation: pos.getAngle()
			});
		}
	}
	
	getPoints(pos, rot){
		if (!pos.equals(this.oldPos) || rot != this.oldAng){
			this.setPoints(pos, rot);
		}
		return this.points;
	}
	
	setPoints(pos, rot){
		for (var i = 0; i < this.offsets.length; i++){
			this.points[i] = this.setPoint(this.offsets[i], pos, rot);
		}
		this.oldPos = pos.clone();
		this.oldAng = rot;
	}
	
	setPoint(offset, pos, rot){
		let p = offset.position.clone();
		p.setAngle(rot + offset.rotation);
		return p.add(pos);
	}
}