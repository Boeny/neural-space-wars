{"version":3,"sources":["webpack:///webpack/bootstrap 5fce5e711717ebbbeac7","webpack:///(webpack)/buildin/global.js","webpack:///./src/node_modules/vector2/vector2.js","webpack:///./src/client/index.js","webpack:///./src/node_modules/canvas/index.js","webpack:///./src/node_modules/canvas/canvas.js","webpack:///./src/node_modules/canvas/controls.js","webpack:///./src/client/ship.js","webpack:///./src/node_modules/figure/figure.js","webpack:///./src/client/star.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AC7DA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;ACpBA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,yBAAyB;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kE;;;;;;;;;AC9GA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACVA;AACA;;AAEA;AACA,UAAU,MAAM,WAAW,iBAAiB;AAC5C,UAAU,OAAO;AACjB,UAAU,OAAO;AACjB;AACA;AACA;;AAEA;;AAEA,gBAAgB,mBAAmB;AACnC,sBAAsB,IAAI;AAC1B;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,kBAAkB,oBAAoB;AACtC;AACA;AACA,GAAG;AACH;AACA;;AAEA;;;;;;;;;8CC7DA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;AChIA;AACA;AACA,gCAAgC;;AAEhC,gBAAgB,iBAAiB;AACjC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,mBAAmB;AACtC;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;;ACtJA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB;;AAEnB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;AChEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,iBAAiB,mBAAmB;AACpC;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,iBAAiB,yBAAyB;AAC1C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,C;;;;;;;;;;;AC5CA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,iBAAiB,yBAAyB;AAC1C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,4CAA4C;AAC5C;AACA;;AAEA;AACA;;AAEA,aAAa,qBAAqB;AAClC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5fce5e711717ebbbeac7","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 0\n// module chunks = 0","var PI_2 = Math.PI / 2;\r\n\r\nclass Vector2 {\r\n\tconstructor(x, y){\r\n\t\tthis.x = x || 0;\r\n\t\tthis.y = y || 0;\r\n\t}\r\n\t\r\n\tstatic get zero(){\r\n\t\treturn new Vector2();\r\n\t}\r\n\tstatic get up(){\r\n\t\treturn new Vector2(0,1);\r\n\t}\r\n\tstatic get down(){\r\n\t\treturn new Vector2(0,-1);\r\n\t}\r\n\tstatic get left(){\r\n\t\treturn new Vector2(-1,0);\r\n\t}\r\n\tstatic get right(){\r\n\t\treturn new Vector2(1,0);\r\n\t}\r\n\t\r\n\tstatic check(v){\r\n\t\tif (!v) return Vector2.zero;\r\n\t\tif (v instanceof Array) return new Vector2(v[0], v[1]);\r\n\t\tif (typeof v != 'object') return new Vector2(v, v);\r\n\t\treturn v;\r\n\t}\r\n\t\r\n\tstatic round(n, depth = 1000){\r\n\t\treturn Math.round(depth * n) / depth;\r\n\t}\r\n\tstatic roundVector(v, depth = 1000){\r\n\t\treturn v.clone().roundSelf(depth);\r\n\t}\r\n\t\r\n\troundSelf(depth){\r\n\t\treturn this.withSelf( (coo) => Vector2.round(coo, depth) );\r\n\t}\r\n\t\r\n\twithSelf(forCoo = ()=>{}){\r\n\t\tthis.x = forCoo(this.x);\r\n\t\tthis.y = forCoo(this.y);\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tclone(){\r\n\t\treturn new Vector2(this.x, this.y);\r\n\t}\r\n\t\r\n\tadd(v){\r\n\t\tv = Vector2.check(v);\r\n\t\tthis.x += v.x;\r\n\t\tthis.y += v.y;\r\n\t\treturn this;\r\n\t}\r\n\tsub(v){\r\n\t\tv = Vector2.check(v);\r\n\t\tthis.x -= v.x;\r\n\t\tthis.y -= v.y;\r\n\t\treturn this;\r\n\t}\r\n\tmult(v){\r\n\t\tv = Vector2.check(v);\r\n\t\tthis.x *= v.x;\r\n\t\tthis.y *= v.y;\r\n\t\treturn this;\r\n\t}\r\n\tnormalize(){\r\n\t\tthis.mult(1.0 / this.length);\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tequals(v){\r\n\t\treturn this.x == v.x && this.y == v.y;\r\n\t}\r\n\t\r\n\tget sqrLength(){\r\n\t\treturn this.x * this.x + this.y * this.y;\r\n\t}\r\n\tget length(){\r\n\t\treturn Math.sqrt(this.sqrLength);\r\n\t}\r\n\t\r\n\ttoString(){\r\n\t\treturn '(' + this.x + ', ' + this.y + ')';\r\n\t}\r\n\t\r\n\tgetAngle(){\r\n\t\tlet angle = Math.acos(this.x / this.length);\r\n\t\tif (this.y < 0) angle = -angle;\r\n\t\treturn angle;\r\n\t}\r\n\t\r\n\tsetAngle(newAngle, center){\r\n\t\tif (!center) center = Vector2.zero;\r\n\t\t\r\n\t\tthis.sub(center);\r\n\t\tlet len = this.length;\r\n\t\t\r\n\t\tthis.x = len * Math.cos(newAngle);\r\n\t\tthis.y = len * Math.sin(newAngle);\r\n\t\t\r\n\t\tthis.add(center);\r\n\t\treturn this;\r\n\t}\r\n}\r\n\r\nexport default Vector2;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/node_modules/vector2/vector2.js\n// module id = 1\n// module chunks = 0","'use strict';\r\n\r\nimport Canvas from 'canvas';\r\n\r\nCanvas.ready(\r\n\t[\r\n\t\trequire('./ship'),\r\n\t\trequire('./star')\r\n\t],\r\n\t0.5\r\n);\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/index.js\n// module id = 2\n// module chunks = 0","import Canvas from './canvas';\r\nimport Controls from './controls';\r\n\r\n/**\r\n * @prop {Array} models [ {className: class}, ... ]\r\n * @prop {Number} width of the canvas\r\n * @prop {Number} height of the canvas\r\n */\r\nCanvas.ready = function(models, multiplier){\r\n\tif (!models) return;\r\n\t\r\n\tvar objects = {};\r\n\t\r\n\tfor (var i = 0; i < models.length; i++){\r\n\t\tlet obj = models[i];// {className: class}\r\n\t\tlet className = Object.keys(obj)[0];\r\n\t\tobjects[className.toLowerCase()] = new obj[className]();\r\n\t}\r\n\t\r\n\tglobal.onload = function(){\r\n\t\tvar renderer = new Canvas(multiplier);\r\n\t\tvar updates = [];\r\n\t\tvar controls = new Controls(renderer);\r\n\t\t\r\n\t\tfor (var name in objects){\r\n\t\t\tlet obj = objects[name];\r\n\t\t\tobj.renderer = renderer;\r\n\t\t\tobj.controls = controls;\r\n\t\t\t\r\n\t\t\tif (obj.Start) obj.Start(objects);\r\n\t\t\t\r\n\t\t\tif (obj.render || obj.Update){\r\n\t\t\t\tlet upd;\r\n\t\t\t\t\r\n\t\t\t\tif (obj.render && !obj.Update) upd = obj.render.bind(obj);\r\n\t\t\t\t\r\n\t\t\t\tif (!obj.render && obj.Update) upd = obj.Update.bind(obj);\r\n\t\t\t\t\r\n\t\t\t\tif (obj.render && obj.Update) upd = () => {\r\n\t\t\t\t\tobj.Update();\r\n\t\t\t\t\tobj.render();\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tupdates.push(upd);\r\n\t\t\t\tif (obj.render) obj.render();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tcontrols.Bind(objects);\r\n\t\t\r\n\t\t(function render(){\r\n\t\t\trequestAnimationFrame(render);\r\n\t\t\trenderer.clear();\r\n\t\t\t\r\n\t\t\tfor (var i = 0; i < updates.length; i++){\r\n\t\t\t\tupdates[i]();\r\n\t\t\t}\r\n\t\t})();\r\n\t};\r\n}\r\n\r\nexport default Canvas;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/node_modules/canvas/index.js\n// module id = 3\n// module chunks = 0","export default class Canvas\r\n{\r\n\tconstructor(mult){\r\n\t\tthis.DOM = document.createElement('canvas');\r\n\t\tdocument.body.appendChild(this.DOM);\r\n\t\t\r\n\t\tthis.multiplier = mult;\r\n\t\tthis.setSize();\r\n\t\t\r\n\t\tthis.canvas = this.DOM.getContext('2d');\r\n\t}\r\n\t\r\n\tsetSize(){\r\n\t\tthis.DOM.width = this.multiplier * global.innerWidth;\r\n\t\tthis.DOM.height = this.multiplier * global.innerHeight;\r\n\t}\r\n\t\r\n\tget width(){\r\n\t\treturn this.DOM.width;\r\n\t}\r\n\tget height(){\r\n\t\treturn this.DOM.height;\r\n\t}\r\n\t\r\n\taddEvent(event, handler){\r\n\t\tthis.DOM.addEventListener(event, handler);\r\n\t}\r\n\t\r\n\tcreateData(w,h){\r\n\t\treturn this.canvas.createImageData(w || this.width, h || this.height);\r\n\t}\r\n\trenderData(img, x,y){\r\n\t\tthis.canvas.putImageData(img, x || 0, y || 0);\r\n\t}\r\n\tclear(){\r\n\t\tthis.renderData(this.createData());\r\n\t}\r\n\t\r\n\tgetColorAtIndex(img,i){\r\n\t\treturn {\r\n\t\t\tr: img.data[i] || 0,\r\n\t\t\tg: img.data[i+1] || 0,\r\n\t\t\tb: img.data[i+2] || 0,\r\n\t\t\ta: img.data[i+3] || 0\r\n\t\t};\r\n\t}\r\n\tsetColorAtIndex(img,i,c){\r\n\t\tc = c || {};\r\n\t\t\r\n\t\timg.data[i] = c.r === undefined ? 0 : c.r;\r\n\t\timg.data[i+1] = c.g === undefined ? 0 : c.g;\r\n\t\timg.data[i+2] = c.b === undefined ? 0 : c.b;\r\n\t\timg.data[i+3] = c.a === undefined ? 255 : c.a;\r\n\t}\r\n\t\r\n\tgetColorAt(img, x,y){\r\n\t\treturn this.getColorAtIndex(img, 4*(x + y * this.DOM.width));\r\n\t}\r\n\tsetColorAt(p, x,y, c){\r\n\t\tvar i = 4*(x + y * this.DOM.width);\r\n\t\tthis.setColorAtIndex(p,i,c);\r\n\t}\r\n\t\r\n\t//--------------------------------------\r\n\t\r\n\tsetColor(color){\r\n\t\tif (!color) return;\r\n\t\tif (typeof color != 'object') color = {fill: color, stroke: color};\r\n\t\tif (color.stroke) this.canvas.strokeStyle = color.stroke;\r\n\t\tif (color.fill) this.canvas.fillStyle = color.fill;\r\n\t}\r\n\t\r\n\trender(){\r\n\t\tthis.canvas.closePath();\r\n\t\tthis.canvas.stroke();\r\n\t}\r\n\t\r\n\tdrawLine(p1, p2, width){\r\n\t\tif (width) this.canvas.lineWidth = width;\r\n\t\tthis.canvas.beginPath();\r\n\t\t\r\n\t\tthis.canvas.moveTo(p1.x+0.5, p1.y+0.5);\r\n\t\tthis.canvas.lineTo(p2.x+0.5, p2.y+0.5);\r\n\t\t\r\n\t\tthis.render();\r\n\t}\r\n\tdrawLineTo(p, init, width){\r\n\t\tif (init) this.init_point = init;\r\n\t\tthis.drawLine(this.init_point, p, width);\r\n\t\tthis.init_point = p;\r\n\t}\r\n\tdrawLines(points, width){\r\n\t\tif (!points.length) return;\r\n\t\t\r\n\t\tthis.init_point = points[0];\r\n\t\t\r\n\t\tfor (var i = 1; i < points.length; i++){\r\n\t\t\tthis.drawLineTo(points[i], null, width);\r\n\t\t}\r\n\t}\r\n\t\r\n\tdrawRect(p1, p2){\r\n\t\tthis.canvas.beginPath();\r\n\t\tthis.canvas.fillRect(p1.x+0.5, p1.y+0.5, p2.x+0.5, p2.y+0.5);\r\n\t\tthis.render();\r\n\t}\r\n\tdrawPoly(points, width){\r\n\t\tthis.drawLines(points, width);\r\n\t\tthis.drawLineTo(points[0], null, width);// close path\r\n\t}\r\n\tdrawCircle(p, radius, width){\r\n\t\tthis.canvas.beginPath();\r\n\t\tthis.canvas.arc(p.x, p.y, radius, 0, 2 * Math.PI, false);\r\n\t\tthis.canvas.fill();\r\n\t\tif (width) this.canvas.lineWidth = width;\r\n\t\tthis.render();\r\n\t}\r\n\t\r\n\tdrawText(text, p, font){\r\n\t\tif (font) this.canvas.font = font;\r\n\t\tthis.canvas.fillText(text, p.x, p.y);\r\n\t}\r\n\tdrawTexts(texts){\r\n\t\tfor (var i = 0; i < texts.length; i++){\r\n\t\t\tlet t = texts[i];\r\n\t\t\tthis.drawText(t[0], t[1], t[2]);\r\n\t\t}\r\n\t}\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/node_modules/canvas/canvas.js\n// module id = 4\n// module chunks = 0","global.merge = function(o1, o2){\r\n\tif (!o1) o1 = {};\r\n\tvar keys = Object.keys(o2 || {});\r\n\t\r\n\tfor (var i = 0; i < keys.length; i++){\r\n\t\to1[keys[i]] = o2[keys[i]];\r\n\t}\r\n\treturn o1;\r\n};\r\n\r\nvar defaults = {\r\n\tenabled: false,\r\n\tenableKeys: true,\r\n\tenableMouse: true,\r\n\tenableTouch: true,\r\n\t\r\n\tkeys: {\r\n\t\tSPACE: 32,\r\n\t\tUP: 38,\r\n\t\tDOWN: 40,\r\n\t\tLEFT: 37,\r\n\t\tRIGHT: 39,\r\n\t\tW: 87,\r\n\t\tA: 65,\r\n\t\tS: 83,\r\n\t\tD: 68,\r\n\t\tCTRL: false\r\n\t},\r\n\tmouse: {\r\n\t\tLEFT: 0,\r\n\t\tWHEEL: 1,\r\n\t\tMIDDLE: 1,\r\n\t\tRIGHT: 2\r\n\t},\r\n\t\r\n\thandlers: {\r\n\t\tkeydown: 'onKeyDown',\r\n\t\tkeyup: 'onKeyUp',\r\n\t\t\r\n\t\tmousemove: 'onMouseMove',\r\n\t\tmousedown: 'onMouseDown',\r\n\t\tmouseup: 'onMouseUp',\r\n\t\tclick: 'onClick',\r\n\t\twheel: 'onMouseWheel',\r\n\t\tcontextmenu: 'onContextMenu',\r\n\t\t\r\n\t\ttouchstart: 'onTouchStart',\r\n\t\ttouchend: 'onTouchEnd',\r\n\t\ttouchmove: 'onTouchMove',\r\n\t}\r\n};\r\n\r\nexport default class Controls\r\n{\r\n\tconstructor(renderer){\r\n\t\tmerge(this, defaults);\r\n\t\tthis.renderer = renderer;\r\n\t\t\r\n\t\t// Hook pointer lock state change events\r\n\t\tdocument.addEventListener('pointerlockchange', (e) => this.onPointerLockingChange(e), false);\r\n\t\tdocument.addEventListener('mozpointerlockchange', (e) => this.onPointerLockingChange(e), false);\r\n\t\tdocument.addEventListener('webkitpointerlockchange', (e) => this.onPointerLockingChange(e), false);\r\n\t\t\r\n\t\tdocument.addEventListener('pointerlockerror', (e) => this.onPointerLockingError(e), false);\r\n\t\tdocument.addEventListener('mozpointerlockerror', (e) => this.onPointerLockingError(e), false);\r\n\t\tdocument.addEventListener('webkitpointerlockerror', (e) => this.onPointerLockingError(e), false);\r\n\t}\r\n\t\r\n\tBind(objects){\r\n\t\tfor (var name in objects){\r\n\t\t\tlet obj = objects[name];\r\n\t\t\t\r\n\t\t\tfor (let eventName in this.handlers){\r\n\t\t\t\tlet handlerName = this.handlers[eventName];\r\n\t\t\t\t\r\n\t\t\t\tif (obj[handlerName]){\r\n\t\t\t\t\tdocument.body.addEventListener(eventName, (e) => {\r\n\t\t\t\t\t\tif (!this.enabled) return;\r\n\t\t\t\t\t\tthis.keys.CTRL = e.ctrlKey;\r\n\t\t\t\t\t\tthis.eventHandler(e, obj, handlerName);\r\n\t\t\t\t\t}, false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tglobal.addEventListener('resize', () => {\r\n\t\t\tthis.renderer.setSize();\r\n\t\t}, false);\r\n\t}\r\n\t\r\n\teventHandler(e, obj, handlerName){\r\n\t\tvar handler = obj[handlerName].bind(obj);\r\n\t\t\r\n\t\te.preventDefault();\r\n\t\te.stopPropagation();\r\n\t\t\r\n\t\tswitch (handlerName){\r\n\t\t\tcase 'onKeyDown':\r\n\t\t\tcase 'onKeyUp':\r\n\t\t\t\tif (!this.enableKeys) return;\r\n\t\t\t\treturn handler(e.keyCode);\r\n\t\t\t\r\n\t\t\tcase 'onMouseMove':\r\n\t\t\t\tif (!this.enableMouse) return;\r\n\t\t\t\treturn handler(\r\n\t\t\t\t\tnew THREE.Vector2(e.clientX, e.clientY),\r\n\t\t\t\t\tnew THREE.Vector2(\r\n\t\t\t\t\t\te.movementX || e.mozMovementX || e.webkitMovementX || 0,\r\n\t\t\t\t\t\te.movementY || e.mozMovementY || e.webkitMovementY || 0\r\n\t\t\t\t\t)\r\n\t\t\t\t);\r\n\t\t\t\r\n\t\t\tcase 'onMouseWheel':\r\n\t\t\t\tif (!this.enableMouse) return;\r\n\t\t\t\treturn handler(e.deltaY);\r\n\t\t\t\r\n\t\t\tcase 'onClick':\r\n\t\t\tcase 'onMouseUp':\r\n\t\t\tcase 'onMouseDown':\r\n\t\t\t\tif (!this.enableMouse) return;\r\n\t\t\t\treturn handler(e.button, new THREE.Vector2(e.clientX, e.clientY));\r\n\t\t\t\r\n\t\t\tcase 'onTouchStart':\r\n\t\t\tcase 'onTouchMove':\r\n\t\t\tcase 'onTouchEnd':\r\n\t\t\t\tif (!this.enableTouch) return;\r\n\t\t\t\tlet points = new Array(e.touches.length);\r\n\t\t\t\t\r\n\t\t\t\tfor (var i = 0; i < points.length; i++){\r\n\t\t\t\t\tpoints[i] = new THREE.Vector2(e.touches[i].pageX, e.touches[i].pageY);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn handler(points);\r\n\t\t\t\r\n\t\t\tdefault:\r\n\t\t\t\treturn handler();\r\n\t\t}\r\n\t}\r\n\t\r\n\tonPointerLockingError(){}\r\n\tonPointerLockingChange(){}\r\n\t\r\n\t// Ask the browser to lock the pointer\r\n\tlockPointer(elem){\r\n\t\tlet lock = elem.requestPointerLock || elem.mozRequestPointerLock || elem.webkitRequestPointerLock;\r\n\t\tlock && lock();\r\n\t}\r\n\tisPointerLocked(elem){\r\n\t\treturn document.pointerLockElement === elem || document.mozPointerLockElement === elem || document.webkitPointerLockElement === elem;\r\n\t}\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/node_modules/canvas/controls.js\n// module id = 5\n// module chunks = 0","import Vector2 from 'vector2';\r\nimport Figure from 'figure';\r\n\r\nconst PI = Math.PI;\r\nconst PI_2 = PI / 2;\r\nconst PIm2 = PI * 2;\r\n\r\nexport class Ship\r\n{\r\n\tconstructor(){\r\n\t\tthis.figure = new Figure([0, 10], [-5, -10], [5, -10]);\r\n\t\tthis.radius = 10;// for collisions\r\n\t\t\r\n\t\tthis.velocity = new Vector2();\r\n\t\tthis.acceleration = Vector2.up.mult(0.1);\r\n\t\tthis.angularVelocity = PI / 40;\r\n\t}\r\n\t\r\n\tStart(objects){\r\n\t\tthis.controls.enabled = true;\r\n\t\t\r\n\t\tthis.position = new Vector2(this.renderer.width / 2 - 100, this.renderer.height / 2);\r\n\t\tthis.rotation = -PI;\r\n\t\t\r\n\t\tthis.figure.setPoints(this.position, this.rotation);\r\n\t}\r\n\t\r\n\tUpdate(){\r\n\t\tif (this.isDestroyed) return;\r\n\t\tthis.position.add(this.velocity);\r\n\t}\r\n\t\r\n\trender(){\r\n\t\tif (this.isDestroyed) return;\r\n\t\tthis.renderer.setColor('white');\r\n\t\tthis.renderer.drawPoly(this.figure.getPoints(this.position, this.rotation));\r\n\t}\r\n\t\r\n\tdestroy(){\r\n\t\tthis.isDestroyed = true;\r\n\t}\r\n\t\r\n\t//------------------------------------- EVENTS\r\n\t\r\n\tonKeyDown(key){\r\n\t\tswitch (key) {\r\n\t\t\tcase this.controls.keys.UP:\r\n\t\t\tcase this.controls.keys.W:\r\n\t\t\t\tthis.velocity.add(this.acceleration.setAngle(this.rotation));\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase this.controls.keys.LEFT:\r\n\t\t\tcase this.controls.keys.A:\r\n\t\t\t\tthis.rotation -= this.angularVelocity;\r\n\t\t\t\tif (this.rotation < -PI) this.rotation += PIm2;\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase this.controls.keys.RIGHT:\r\n\t\t\tcase this.controls.keys.D:\r\n\t\t\t\tthis.rotation += this.angularVelocity;\r\n\t\t\t\tif (this.rotation > PI) this.rotation -= PIm2;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/ship.js\n// module id = 6\n// module chunks = 0","import Vector2 from 'vector2';\r\n\r\nexport default class Figure\r\n{\r\n\tconstructor(...points){\r\n\t\tthis.points = new Array(points.length);\r\n\t\tthis.setOffsets(points);\r\n\t}\r\n\t\r\n\tsetOffsets(points){\r\n\t\tthis.offsets = [];\r\n\t\tlet PI_2 = Math.PI / 2;\r\n\t\t\r\n\t\tfor (var i = 0; i < points.length; i++)\r\n\t\t{\r\n\t\t\tlet pos = Vector2.check(points[i]);\r\n\t\t\t\r\n\t\t\tthis.offsets.push({\r\n\t\t\t\tposition: pos,\r\n\t\t\t\trotation: pos.getAngle()\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\tgetPoints(pos, rot){\r\n\t\tif (!pos.equals(this.oldPos) || rot != this.oldAng){\r\n\t\t\tthis.setPoints(pos, rot);\r\n\t\t}\r\n\t\treturn this.points;\r\n\t}\r\n\t\r\n\tsetPoints(pos, rot){\r\n\t\tfor (var i = 0; i < this.offsets.length; i++){\r\n\t\t\tthis.points[i] = this.setPoint(this.offsets[i], pos, rot);\r\n\t\t}\r\n\t\tthis.oldPos = pos.clone();\r\n\t\tthis.oldAng = rot;\r\n\t}\r\n\t\r\n\tsetPoint(offset, pos, rot){\r\n\t\tlet p = offset.position.clone();\r\n\t\tp.setAngle(rot + offset.rotation);\r\n\t\treturn p.add(pos);\r\n\t}\r\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/node_modules/figure/figure.js\n// module id = 7\n// module chunks = 0","import Vector2 from 'vector2';\r\n\r\nexport class Star\r\n{\r\n\tconstructor(){\r\n\t\tthis.radius = 10;\r\n\t\tthis.mass = 1;\r\n\t\tthis.gravity = false;\r\n\t}\r\n\t\r\n\tStart(objects){\r\n\t\tthis.position = new Vector2(this.renderer.width / 2, this.renderer.height / 2);\r\n\t\tthis.objects = [];\r\n\t\t\r\n\t\tfor (var name in objects){\r\n\t\t\tif (objects[name].velocity){\r\n\t\t\t\tthis.objects.push(objects[name]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tUpdate(){\r\n\t\tif (!this.gravity) return;\r\n\t\t\r\n\t\tvar toDelete = [];\r\n\t\tvar obj, diff, distance, distanceDiff, direction, velocity;\r\n\t\t\r\n\t\tfor (var i = 0; i < this.objects.length; i++){\r\n\t\t\tobj = this.objects[i];\r\n\t\t\tdiff = this.position.clone().sub(obj.position);\r\n\t\t\tdistance = diff.length;\r\n\t\t\tdistanceDiff = distance - (this.radius + (obj.radius || 0));\r\n\t\t\t\r\n\t\t\tif (distanceDiff <= 0){\r\n\t\t\t\tobj.destroy();\r\n\t\t\t\ttoDelete.push(i);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdirection = diff.clone().normalize();\r\n\t\t\tvelocity = direction.clone().mult(this.mass / distance);\r\n\t\t\t\r\n\t\t\tif (distanceDiff - velocity.length <= 0){// on the next frame\r\n\t\t\t\tvelocity = direction.clone().mult(distance - this.radius);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tobj.velocity.add(velocity);\r\n\t\t}\r\n\t\t\r\n\t\tfor (i = 0; i < toDelete.length; i++){\r\n\t\t\tthis.objects.splice(toDelete[i], 1);\r\n\t\t}\r\n\t}\r\n\t\r\n\trender(){\r\n\t\tthis.renderer.setColor('white');\r\n\t\tthis.renderer.drawCircle(this.position, this.radius);\r\n\t}\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/client/star.js\n// module id = 8\n// module chunks = 0"],"sourceRoot":""}